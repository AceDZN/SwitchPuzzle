import {Component} from '@angular/core';

@Component({
  selector: 'ace-puzzle',
  template: `
    <section [ngClass]="{section:true, default:!name, game:name,success:winner == true}" >
      <div class="container">
        <h1>
          LightSwitch
          <span class="pull-right" *ngIf="name">{{steps}}</span>
        </h1>
       <div class="form-group" *ngIf="!name">
         <label for="exampleInputEmail1">
          <h4>Enter your name Please:</h4>
         </label>
         <form class="row" (submit)="onNameInput(playerNameInput.value)">
           <div class="col-xs-8 text-left">
            <input type="text" class="form-control" #playerNameInput>
           </div>
           <div class="col-xs-4 text-right">
            <button class="btn btn-primary" type="submit" >
              Start
            </button>
           </div>
         </form>
       </div>
       <div *ngIf="name">
         <div class="row">
           <div class="col-xs-6 col-sm-3 text-center switch-wrap">
            <label>
              <input [disabled]="winner == true" type="checkbox" #switch1 (change)="onCheckboxCheck('switchone',switch1)">
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="170px" height="170px" viewBox="0 0 493.761 493.762" xml:space="preserve">
              	<g class="light-bulb" [ngClass]="{lighted:switchone}">
                  <path d="M290.652,402.646h-87.595c-6.781,0-12.283,5.503-12.283,12.283c0,6.785,5.502,12.287,12.283,12.287h87.595 c6.781,0,12.289-5.502,12.289-12.287C302.942,408.149,297.435,402.646,290.652,402.646z" fill="#000000"/> <path d="M224.299,474.245c1.666,11.026,11.086,19.517,22.586,19.517c11.488,0,20.93-8.487,22.589-19.517 c15.037-0.888,26.987-13.245,26.987-28.504H197.25C197.25,461.009,209.235,473.375,224.299,474.245z" fill="#000000"/> <path class="sparkle" d="M246.884,70.87c9.062,0,16.387-7.335,16.387-16.381V16.381C263.271,7.332,255.947,0,246.884,0 c-9.053,0-16.377,7.332-16.377,16.381v38.108C230.508,63.535,237.832,70.87,246.884,70.87z" fill="#FFDA44"/> <path class="sparkle" d="M139.39,94.736c3.217,4.417,8.209,6.761,13.283,6.761c3.326,0,6.699-1.017,9.609-3.129 c7.313-5.312,8.945-15.555,3.633-22.873l-22.396-30.84c-5.326-7.312-15.549-8.96-22.887-3.632 c-7.311,5.309-8.943,15.555-3.631,22.873L139.39,94.736z" fill="#FFDA44"/> <path class="sparkle" d="M354.354,334.861c-5.313-7.312-15.549-8.934-22.881-3.621c-7.306,5.317-8.937,15.562-3.61,22.879l22.409,30.841 c3.196,4.407,8.188,6.753,13.265,6.753c3.338,0,6.698-1.017,9.608-3.128c7.312-5.319,8.942-15.565,3.619-22.884L354.354,334.861 z" fill="#FFDA44"/> <path class="sparkle" d="M99.502,149.684l-36.252-11.79c-8.686-2.799-17.846,1.911-20.648,10.518c-2.803,8.597,1.904,17.843,10.508,20.642 l36.252,11.79c1.693,0.544,3.387,0.809,5.066,0.809c6.91,0,13.324-4.4,15.582-11.327 C112.812,161.729,108.106,152.482,99.502,149.684z" fill="#FFDA44"/> <path class="sparkle" d="M440.649,260.538l-36.243-11.773c-8.611-2.778-17.841,1.918-20.638,10.516c-2.802,8.606,1.918,17.848,10.521,20.646 l36.252,11.772c1.681,0.545,3.373,0.807,5.054,0.807c6.909,0,13.323-4.407,15.581-11.324 C453.971,272.572,449.258,263.337,440.649,260.538z" fill="#FFDA44"/> <path class="sparkle" d="M89.375,248.765L53.11,260.522c-8.604,2.79-13.324,12.026-10.521,20.635c2.238,6.927,8.664,11.334,15.574,11.334 c1.668,0,3.381-0.267,5.061-0.811l36.258-11.756c8.611-2.792,13.33-12.03,10.529-20.635 C107.229,250.689,98.059,245.986,89.375,248.765z" fill="#FFDA44"/> <path class="sparkle" d="M399.35,181.653c1.681,0,3.373-0.265,5.056-0.809l36.243-11.773c8.608-2.799,13.322-12.039,10.526-20.642 c-2.803-8.6-12.077-13.3-20.635-10.518l-36.252,11.772c-8.604,2.798-13.322,12.038-10.521,20.642 C386.02,177.246,392.44,181.653,399.35,181.653z" fill="#FFDA44"/> <path class="sparkle" d="M139.412,334.855l-22.431,30.822c-5.326,7.318-3.707,17.563,3.619,22.883c2.896,2.119,6.27,3.138,9.609,3.138 c5.074,0,10.066-2.336,13.264-6.744l22.43-30.824c5.326-7.316,3.707-17.562-3.619-22.883 C154.991,325.898,144.702,327.538,139.412,334.855z" fill="#FFDA44"/> <path class="sparkle" d="M350.258,44.654l-22.396,30.84c-5.312,7.318-3.681,17.562,3.633,22.873c2.91,2.112,6.283,3.129,9.608,3.129 c5.074,0,10.065-2.343,13.276-6.761l22.396-30.841c5.311-7.318,3.68-17.564-3.634-22.873 C365.786,35.68,355.584,37.326,350.258,44.654z" fill="#FFDA44"/> <path class="bulb" d="M365.194,215.404c0-65.354-52.976-118.333-118.322-118.333c-65.359,0-118.336,52.979-118.336,118.333 c0,27.569,9.482,52.884,25.322,72.981c13.881,17.612,27.027,36.839,38.42,56.187v39.306h108.516v-38.263 c11.288-18.818,25.881-40.484,39.065-57.211C355.713,268.301,365.194,242.991,365.194,215.404z" fill="#FFDA44"/>
              	</g>
              </svg>
            </label>
           </div>
           <div class="col-xs-6 col-sm-3 text-center switch-wrap">
            <label>
              <input [disabled]="winner == true" type="checkbox" #switch2 (change)="onCheckboxCheck('switchtwo',switch2)">
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="170px" height="170px" viewBox="0 0 493.761 493.762" xml:space="preserve">
              	<g class="light-bulb" [ngClass]="{lighted:switchtwo}">
                  <path d="M290.652,402.646h-87.595c-6.781,0-12.283,5.503-12.283,12.283c0,6.785,5.502,12.287,12.283,12.287h87.595 c6.781,0,12.289-5.502,12.289-12.287C302.942,408.149,297.435,402.646,290.652,402.646z" fill="#000000"/> <path d="M224.299,474.245c1.666,11.026,11.086,19.517,22.586,19.517c11.488,0,20.93-8.487,22.589-19.517 c15.037-0.888,26.987-13.245,26.987-28.504H197.25C197.25,461.009,209.235,473.375,224.299,474.245z" fill="#000000"/> <path class="sparkle" d="M246.884,70.87c9.062,0,16.387-7.335,16.387-16.381V16.381C263.271,7.332,255.947,0,246.884,0 c-9.053,0-16.377,7.332-16.377,16.381v38.108C230.508,63.535,237.832,70.87,246.884,70.87z" fill="#FFDA44"/> <path class="sparkle" d="M139.39,94.736c3.217,4.417,8.209,6.761,13.283,6.761c3.326,0,6.699-1.017,9.609-3.129 c7.313-5.312,8.945-15.555,3.633-22.873l-22.396-30.84c-5.326-7.312-15.549-8.96-22.887-3.632 c-7.311,5.309-8.943,15.555-3.631,22.873L139.39,94.736z" fill="#FFDA44"/> <path class="sparkle" d="M354.354,334.861c-5.313-7.312-15.549-8.934-22.881-3.621c-7.306,5.317-8.937,15.562-3.61,22.879l22.409,30.841 c3.196,4.407,8.188,6.753,13.265,6.753c3.338,0,6.698-1.017,9.608-3.128c7.312-5.319,8.942-15.565,3.619-22.884L354.354,334.861 z" fill="#FFDA44"/> <path class="sparkle" d="M99.502,149.684l-36.252-11.79c-8.686-2.799-17.846,1.911-20.648,10.518c-2.803,8.597,1.904,17.843,10.508,20.642 l36.252,11.79c1.693,0.544,3.387,0.809,5.066,0.809c6.91,0,13.324-4.4,15.582-11.327 C112.812,161.729,108.106,152.482,99.502,149.684z" fill="#FFDA44"/> <path class="sparkle" d="M440.649,260.538l-36.243-11.773c-8.611-2.778-17.841,1.918-20.638,10.516c-2.802,8.606,1.918,17.848,10.521,20.646 l36.252,11.772c1.681,0.545,3.373,0.807,5.054,0.807c6.909,0,13.323-4.407,15.581-11.324 C453.971,272.572,449.258,263.337,440.649,260.538z" fill="#FFDA44"/> <path class="sparkle" d="M89.375,248.765L53.11,260.522c-8.604,2.79-13.324,12.026-10.521,20.635c2.238,6.927,8.664,11.334,15.574,11.334 c1.668,0,3.381-0.267,5.061-0.811l36.258-11.756c8.611-2.792,13.33-12.03,10.529-20.635 C107.229,250.689,98.059,245.986,89.375,248.765z" fill="#FFDA44"/> <path class="sparkle" d="M399.35,181.653c1.681,0,3.373-0.265,5.056-0.809l36.243-11.773c8.608-2.799,13.322-12.039,10.526-20.642 c-2.803-8.6-12.077-13.3-20.635-10.518l-36.252,11.772c-8.604,2.798-13.322,12.038-10.521,20.642 C386.02,177.246,392.44,181.653,399.35,181.653z" fill="#FFDA44"/> <path class="sparkle" d="M139.412,334.855l-22.431,30.822c-5.326,7.318-3.707,17.563,3.619,22.883c2.896,2.119,6.27,3.138,9.609,3.138 c5.074,0,10.066-2.336,13.264-6.744l22.43-30.824c5.326-7.316,3.707-17.562-3.619-22.883 C154.991,325.898,144.702,327.538,139.412,334.855z" fill="#FFDA44"/> <path class="sparkle" d="M350.258,44.654l-22.396,30.84c-5.312,7.318-3.681,17.562,3.633,22.873c2.91,2.112,6.283,3.129,9.608,3.129 c5.074,0,10.065-2.343,13.276-6.761l22.396-30.841c5.311-7.318,3.68-17.564-3.634-22.873 C365.786,35.68,355.584,37.326,350.258,44.654z" fill="#FFDA44"/> <path class="bulb" d="M365.194,215.404c0-65.354-52.976-118.333-118.322-118.333c-65.359,0-118.336,52.979-118.336,118.333 c0,27.569,9.482,52.884,25.322,72.981c13.881,17.612,27.027,36.839,38.42,56.187v39.306h108.516v-38.263 c11.288-18.818,25.881-40.484,39.065-57.211C355.713,268.301,365.194,242.991,365.194,215.404z" fill="#FFDA44"/>
              	</g>
              </svg>
            </label>
           </div>
           <div class="col-xs-6 col-sm-3 text-center switch-wrap">
            <label>
              <input [disabled]="winner == true" type="checkbox" #switch3 (change)="onCheckboxCheck('switchthree',switch3)">
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="170px" height="170px" viewBox="0 0 493.761 493.762" xml:space="preserve">
              	<g class="light-bulb" [ngClass]="{lighted:switchthree}">
                  <path d="M290.652,402.646h-87.595c-6.781,0-12.283,5.503-12.283,12.283c0,6.785,5.502,12.287,12.283,12.287h87.595 c6.781,0,12.289-5.502,12.289-12.287C302.942,408.149,297.435,402.646,290.652,402.646z" fill="#000000"/> <path d="M224.299,474.245c1.666,11.026,11.086,19.517,22.586,19.517c11.488,0,20.93-8.487,22.589-19.517 c15.037-0.888,26.987-13.245,26.987-28.504H197.25C197.25,461.009,209.235,473.375,224.299,474.245z" fill="#000000"/> <path class="sparkle" d="M246.884,70.87c9.062,0,16.387-7.335,16.387-16.381V16.381C263.271,7.332,255.947,0,246.884,0 c-9.053,0-16.377,7.332-16.377,16.381v38.108C230.508,63.535,237.832,70.87,246.884,70.87z" fill="#FFDA44"/> <path class="sparkle" d="M139.39,94.736c3.217,4.417,8.209,6.761,13.283,6.761c3.326,0,6.699-1.017,9.609-3.129 c7.313-5.312,8.945-15.555,3.633-22.873l-22.396-30.84c-5.326-7.312-15.549-8.96-22.887-3.632 c-7.311,5.309-8.943,15.555-3.631,22.873L139.39,94.736z" fill="#FFDA44"/> <path class="sparkle" d="M354.354,334.861c-5.313-7.312-15.549-8.934-22.881-3.621c-7.306,5.317-8.937,15.562-3.61,22.879l22.409,30.841 c3.196,4.407,8.188,6.753,13.265,6.753c3.338,0,6.698-1.017,9.608-3.128c7.312-5.319,8.942-15.565,3.619-22.884L354.354,334.861 z" fill="#FFDA44"/> <path class="sparkle" d="M99.502,149.684l-36.252-11.79c-8.686-2.799-17.846,1.911-20.648,10.518c-2.803,8.597,1.904,17.843,10.508,20.642 l36.252,11.79c1.693,0.544,3.387,0.809,5.066,0.809c6.91,0,13.324-4.4,15.582-11.327 C112.812,161.729,108.106,152.482,99.502,149.684z" fill="#FFDA44"/> <path class="sparkle" d="M440.649,260.538l-36.243-11.773c-8.611-2.778-17.841,1.918-20.638,10.516c-2.802,8.606,1.918,17.848,10.521,20.646 l36.252,11.772c1.681,0.545,3.373,0.807,5.054,0.807c6.909,0,13.323-4.407,15.581-11.324 C453.971,272.572,449.258,263.337,440.649,260.538z" fill="#FFDA44"/> <path class="sparkle" d="M89.375,248.765L53.11,260.522c-8.604,2.79-13.324,12.026-10.521,20.635c2.238,6.927,8.664,11.334,15.574,11.334 c1.668,0,3.381-0.267,5.061-0.811l36.258-11.756c8.611-2.792,13.33-12.03,10.529-20.635 C107.229,250.689,98.059,245.986,89.375,248.765z" fill="#FFDA44"/> <path class="sparkle" d="M399.35,181.653c1.681,0,3.373-0.265,5.056-0.809l36.243-11.773c8.608-2.799,13.322-12.039,10.526-20.642 c-2.803-8.6-12.077-13.3-20.635-10.518l-36.252,11.772c-8.604,2.798-13.322,12.038-10.521,20.642 C386.02,177.246,392.44,181.653,399.35,181.653z" fill="#FFDA44"/> <path class="sparkle" d="M139.412,334.855l-22.431,30.822c-5.326,7.318-3.707,17.563,3.619,22.883c2.896,2.119,6.27,3.138,9.609,3.138 c5.074,0,10.066-2.336,13.264-6.744l22.43-30.824c5.326-7.316,3.707-17.562-3.619-22.883 C154.991,325.898,144.702,327.538,139.412,334.855z" fill="#FFDA44"/> <path class="sparkle" d="M350.258,44.654l-22.396,30.84c-5.312,7.318-3.681,17.562,3.633,22.873c2.91,2.112,6.283,3.129,9.608,3.129 c5.074,0,10.065-2.343,13.276-6.761l22.396-30.841c5.311-7.318,3.68-17.564-3.634-22.873 C365.786,35.68,355.584,37.326,350.258,44.654z" fill="#FFDA44"/> <path class="bulb" d="M365.194,215.404c0-65.354-52.976-118.333-118.322-118.333c-65.359,0-118.336,52.979-118.336,118.333 c0,27.569,9.482,52.884,25.322,72.981c13.881,17.612,27.027,36.839,38.42,56.187v39.306h108.516v-38.263 c11.288-18.818,25.881-40.484,39.065-57.211C355.713,268.301,365.194,242.991,365.194,215.404z" fill="#FFDA44"/>
              	</g>
              </svg>
            </label>
           </div>
           <div class="col-xs-6 col-sm-3 text-center switch-wrap">
            <label>
              <input [disabled]="winner == true" type="checkbox" #switch4  (change)="onCheckboxCheck('switchfour',switch4)">
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="170px" height="170px" viewBox="0 0 493.761 493.762" xml:space="preserve">
              	<g class="light-bulb" [ngClass]="{lighted:switchfour}">
                  <path d="M290.652,402.646h-87.595c-6.781,0-12.283,5.503-12.283,12.283c0,6.785,5.502,12.287,12.283,12.287h87.595 c6.781,0,12.289-5.502,12.289-12.287C302.942,408.149,297.435,402.646,290.652,402.646z" fill="#000000"/> <path d="M224.299,474.245c1.666,11.026,11.086,19.517,22.586,19.517c11.488,0,20.93-8.487,22.589-19.517 c15.037-0.888,26.987-13.245,26.987-28.504H197.25C197.25,461.009,209.235,473.375,224.299,474.245z" fill="#000000"/> <path class="sparkle" d="M246.884,70.87c9.062,0,16.387-7.335,16.387-16.381V16.381C263.271,7.332,255.947,0,246.884,0 c-9.053,0-16.377,7.332-16.377,16.381v38.108C230.508,63.535,237.832,70.87,246.884,70.87z" fill="#FFDA44"/> <path class="sparkle" d="M139.39,94.736c3.217,4.417,8.209,6.761,13.283,6.761c3.326,0,6.699-1.017,9.609-3.129 c7.313-5.312,8.945-15.555,3.633-22.873l-22.396-30.84c-5.326-7.312-15.549-8.96-22.887-3.632 c-7.311,5.309-8.943,15.555-3.631,22.873L139.39,94.736z" fill="#FFDA44"/> <path class="sparkle" d="M354.354,334.861c-5.313-7.312-15.549-8.934-22.881-3.621c-7.306,5.317-8.937,15.562-3.61,22.879l22.409,30.841 c3.196,4.407,8.188,6.753,13.265,6.753c3.338,0,6.698-1.017,9.608-3.128c7.312-5.319,8.942-15.565,3.619-22.884L354.354,334.861 z" fill="#FFDA44"/> <path class="sparkle" d="M99.502,149.684l-36.252-11.79c-8.686-2.799-17.846,1.911-20.648,10.518c-2.803,8.597,1.904,17.843,10.508,20.642 l36.252,11.79c1.693,0.544,3.387,0.809,5.066,0.809c6.91,0,13.324-4.4,15.582-11.327 C112.812,161.729,108.106,152.482,99.502,149.684z" fill="#FFDA44"/> <path class="sparkle" d="M440.649,260.538l-36.243-11.773c-8.611-2.778-17.841,1.918-20.638,10.516c-2.802,8.606,1.918,17.848,10.521,20.646 l36.252,11.772c1.681,0.545,3.373,0.807,5.054,0.807c6.909,0,13.323-4.407,15.581-11.324 C453.971,272.572,449.258,263.337,440.649,260.538z" fill="#FFDA44"/> <path class="sparkle" d="M89.375,248.765L53.11,260.522c-8.604,2.79-13.324,12.026-10.521,20.635c2.238,6.927,8.664,11.334,15.574,11.334 c1.668,0,3.381-0.267,5.061-0.811l36.258-11.756c8.611-2.792,13.33-12.03,10.529-20.635 C107.229,250.689,98.059,245.986,89.375,248.765z" fill="#FFDA44"/> <path class="sparkle" d="M399.35,181.653c1.681,0,3.373-0.265,5.056-0.809l36.243-11.773c8.608-2.799,13.322-12.039,10.526-20.642 c-2.803-8.6-12.077-13.3-20.635-10.518l-36.252,11.772c-8.604,2.798-13.322,12.038-10.521,20.642 C386.02,177.246,392.44,181.653,399.35,181.653z" fill="#FFDA44"/> <path class="sparkle" d="M139.412,334.855l-22.431,30.822c-5.326,7.318-3.707,17.563,3.619,22.883c2.896,2.119,6.27,3.138,9.609,3.138 c5.074,0,10.066-2.336,13.264-6.744l22.43-30.824c5.326-7.316,3.707-17.562-3.619-22.883 C154.991,325.898,144.702,327.538,139.412,334.855z" fill="#FFDA44"/> <path class="sparkle" d="M350.258,44.654l-22.396,30.84c-5.312,7.318-3.681,17.562,3.633,22.873c2.91,2.112,6.283,3.129,9.608,3.129 c5.074,0,10.065-2.343,13.276-6.761l22.396-30.841c5.311-7.318,3.68-17.564-3.634-22.873 C365.786,35.68,355.584,37.326,350.258,44.654z" fill="#FFDA44"/> <path class="bulb" d="M365.194,215.404c0-65.354-52.976-118.333-118.322-118.333c-65.359,0-118.336,52.979-118.336,118.333 c0,27.569,9.482,52.884,25.322,72.981c13.881,17.612,27.027,36.839,38.42,56.187v39.306h108.516v-38.263 c11.288-18.818,25.881-40.484,39.065-57.211C355.713,268.301,365.194,242.991,365.194,215.404z" fill="#FFDA44"/>
              	</g>
              </svg>
            </label>
           </div>
         </div>
         <div class="text-center" *ngIf="winner == true">
           <h1>Congratulations</h1>
           <h3><span class="cap">{{name}}</span>, You are the big winner</h3>
           <p>You found the solution in {{steps}} steps only</p>
           <div class="row">
            <div class="col-xs-12 col-sm-6 col-sm-offset-3">
              <button (click)="restartGame()" class="btn btn-warning">Restart</button>
            </div>
           </div>
         </div>
         <h4 class="text-center" *ngIf="winner != true"><br />Hey <span class="cap">{{name}} </span>, Try to switch the lights on & off to find the right combination</h4>
       </div>

     </div>
    </section>

  `,
  styleUrls:[
    'src/css/puzzle.css'
  ]
})

export class PuzzleComponent implements OnInit{
  combination:array;
  winner:bool;
  switchone:bool;
  switchtwo:bool;
  switchthree:bool;
  switchfour:bool;
  name:string;
  steps:number;
  ngOnInit():any{
    this.combination = [null,null,null,null];
    this.combination = this.randomizeOrder();
    this.winner = false;
    this.switchone = false;
    this.switchtwo = false;
    this.switchthree = false;
    this.switchfour = false;
    this.name = '';
    this.steps = 0;
  }
  randomizeOrder():any{
    let c = [null,null,null,null];
    for(var i=0; i<4;i++){
      c[i] = Math.random() < 0.5 ? true : false
    }
    console.log(c,"C");
    if(c[0] == false && c[1] == false && c[2] == false && c[3] == false){
      return this.randomizeOrder()
    }

    return c;
  }
  restartGame():any{
    this.combination = this.randomizeOrder();
    this.winner = false;
    this.switchone = false;
    this.switchtwo = false;
    this.switchthree = false;
    this.switchfour = false;
    this.steps = 0;
  }
  onCheckboxCheck(s,c):any{
    this[s] = c.checked;
    if(this.switchone===this.combination[0] && this.switchtwo===this.combination[1] && this.switchthree===this.combination[2] && this.switchfour===this.combination[3]){
      this.winner = true;
    }

    this.steps++;
  }
  onNameInput(name){
    this.name = name.toLowerCase();
  }
}
